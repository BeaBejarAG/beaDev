<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>AddValues</name>
        <label>AddValues</label>
        <locationX>798</locationX>
        <locationY>313</locationY>
        <assignmentItems>
            <assignToReference>ID</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ProductsSelection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LookUpAssets</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Put Text Value into Variable</description>
        <name>CompAccount</name>
        <label>CompAccount</label>
        <locationX>196</locationX>
        <locationY>352</locationY>
        <assignmentItems>
            <assignToReference>CompetName</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Competitor_Account</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Account_Selection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>PopulateAssetsList</name>
        <label>PopulateAssetsList</label>
        <locationX>1256</locationX>
        <locationY>353</locationY>
        <assignmentItems>
            <assignToReference>AssetstoCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CurrentCompProducts.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>LoopProducts</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>A_E</name>
        <choiceText>A-E</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>A</stringValue>
        </value>
    </choices>
    <choices>
        <name>F_K</name>
        <choiceText>F-K</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>F-K</stringValue>
        </value>
    </choices>
    <choices>
        <name>L_P</name>
        <choiceText>L-P</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>L-P</stringValue>
        </value>
    </choices>
    <decisions>
        <name>CreateListofAssetids</name>
        <label>CreateListofAssetids</label>
        <locationX>1256</locationX>
        <locationY>99</locationY>
        <defaultConnector>
            <targetReference>LoopProducts</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>VarContainsID</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ID</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>CurrentCompProducts.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PopulateAssetsList</targetReference>
            </connector>
            <label>VarContainsID</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <description>Searches Accounts for Text Value</description>
        <name>CompAccountLookup</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>Contains</operator>
            <value>
                <elementReference>CompetName</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Competitor</stringValue>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>CompAccountIDforLookup</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>AccountNameforProduct</assignToReference>
            <field>Name</field>
        </outputAssignments>
        <sortField>Name</sortField>
        <sortOrder>Desc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CompetitorAccounts</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Competitor</stringValue>
            </value>
        </filters>
        <object>Account</object>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CompetitorAccountSorted</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>01258000000O8JX</stringValue>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Competitor</stringValue>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>CompAccID</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <sortField>Name</sortField>
        <sortOrder>Asc</sortOrder>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>CompetitorProductsChoice</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Competitor_Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CompAccID</elementReference>
            </value>
        </filters>
        <object>Competitor_Product__c</object>
        <outputAssignments>
            <assignToReference>ID</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <formulas>
        <name>Compcontractname</name>
        <dataType>String</dataType>
        <expression>&apos;Competitor Contract&apos; + &apos; - &apos; + {!Contract_Type}</expression>
    </formulas>
    <interviewLabel>CompetitorContract {!$Flow.CurrentDateTime}</interviewLabel>
    <label>CompetitorContract</label>
    <loops>
        <name>CreateAssetsLoop</name>
        <label>CreateAssetsLoop</label>
        <locationX>1001</locationX>
        <locationY>345</locationY>
        <assignNextValueToReference>Current</assignNextValueToReference>
        <collectionReference>AssetstoCreate</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>CreateAssets</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Contracts_and_Assets_Created</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>LoopProducts</name>
        <label>LoopProducts</label>
        <locationX>996</locationX>
        <locationY>90</locationY>
        <assignNextValueToReference>CurrentCompProducts</assignNextValueToReference>
        <collectionReference>ListofProductsSobj</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>CreateListofAssetids</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CreateAssetsLoop</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>CreateAssets</name>
        <label>CreateAssets</label>
        <locationX>1226</locationX>
        <locationY>601</locationY>
        <connector>
            <targetReference>CreateAssetsLoop</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountAccount__c</field>
            <value>
                <elementReference>CompAccID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Competitor_Product__c</field>
            <value>
                <elementReference>Current</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contract__c</field>
            <value>
                <elementReference>CompContractID</elementReference>
            </value>
        </inputAssignments>
        <object>Competitor_Asset__c</object>
    </recordCreates>
    <recordCreates>
        <name>CreateContract</name>
        <label>CreateContract</label>
        <locationX>558</locationX>
        <locationY>442</locationY>
        <assignRecordIdToReference>CompContractID</assignRecordIdToReference>
        <connector>
            <targetReference>Select_Product_To_Add</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>InputAccID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Competitor__c</field>
            <value>
                <elementReference>CompAccID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contract_Status__c</field>
            <value>
                <elementReference>ContractActive</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Contract_Value__c</field>
            <value>
                <elementReference>Contract_Value</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>EndDate</field>
            <value>
                <elementReference>Contract_EndDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>Compcontractname</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <stringValue>01258000000O8Jc</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>StartDate</field>
            <value>
                <elementReference>Contract_StartDate1</elementReference>
            </value>
        </inputAssignments>
        <object>Contract</object>
    </recordCreates>
    <recordLookups>
        <name>LookUpAssets</name>
        <label>LookUpAssets</label>
        <locationX>798</locationX>
        <locationY>90</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>LoopProducts</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Competitor_Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CompAccID</elementReference>
            </value>
        </filters>
        <object>Competitor_Product__c</object>
        <outputReference>ListofProductsSobj</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <screens>
        <name>Account_Selection</name>
        <label>Account Selection</label>
        <locationX>373</locationX>
        <locationY>400</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>AddContractDetail</targetReference>
        </connector>
        <fields>
            <name>SelectAccount</name>
            <fieldText>&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Select the Competitor account from the list below&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Accounts_Choice</name>
            <choiceReferences>CompAccountLookup</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Accounts Choice</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>AddContractDetail</name>
        <label>AddContractDetail</label>
        <locationX>559</locationX>
        <locationY>226</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>CreateContract</targetReference>
        </connector>
        <fields>
            <name>Screen2Instruction</name>
            <fieldText>&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Add the details of the Competitor contract below:&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#FFFFFF&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;&amp;lt;br/&amp;gt;&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Contract_Type</name>
            <dataType>String</dataType>
            <fieldText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Contract Type - &lt;FONT COLOR=&quot;#CC0033&quot;&gt;Enter summary of contract ie HR System or Payroll&lt;/FONT&gt;&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Contract_StartDate1</name>
            <dataType>Date</dataType>
            <fieldText>Contract StartDate</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Contract_EndDate</name>
            <dataType>Date</dataType>
            <fieldText>Contract EndDate</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Contract_Value</name>
            <dataType>Currency</dataType>
            <fieldText>Contract Value</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
            <scale>0</scale>
        </fields>
        <fields>
            <name>ActiveToggle</name>
            <extensionName>flowruntime:toggle</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <elementReference>Active</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>messageToggleActive</name>
                <value>
                    <elementReference>ContractActive</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>messageToggleInactive</name>
                <value>
                    <elementReference>ContractInactive</elementReference>
                </value>
            </inputParameters>
            <isRequired>true</isRequired>
            <outputParameters>
                <assignToReference>OutboundActive</assignToReference>
                <name>messageToggleActive</name>
            </outputParameters>
        </fields>
        <fields>
            <name>nextStep</name>
            <fieldText>&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#FFFFFF&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;br&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Select next to Create the contract and add products on the following screen.&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Contracts_and_Assets_Created</name>
        <label>Contracts and Assets Created</label>
        <locationX>803</locationX>
        <locationY>602</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>FinalInstructions</name>
            <fieldText>&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Wizard is complete please select finish to reset flow.&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>Reduce number of accounts by Free typing Name</description>
        <name>NarrowAccountsTextbox</name>
        <label>NarrowAccountsTextbox</label>
        <locationX>50</locationX>
        <locationY>347</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>CompAccount</targetReference>
        </connector>
        <fields>
            <name>NameInstructions</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;background-color: rgb(255, 255, 255); font-size: 10px; font-family: sans-serif; color: rgb(204, 0, 0);&quot;&gt;Enter the full or partial name of the Competitor you want to create a contract for&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Competitor_Account</name>
            <dataType>String</dataType>
            <fieldText>Competitor Account</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Product_To_Add</name>
        <label>Select Product To Add</label>
        <locationX>798</locationX>
        <locationY>446</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>AddValues</targetReference>
        </connector>
        <fields>
            <name>Screen3Instructions</name>
            <fieldText>&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;Select One or more competitor products to add to the contract. If you do not need to add products please select next to complete the flow.&lt;/FONT&gt;&lt;/DIV&gt;&lt;DIV ALIGN=&quot;CENTER&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#FFFFFF&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;BR&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>ProductsSelection</name>
            <choiceReferences>CompetitorProductsChoice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>&lt;DIV ALIGN=&quot;LEFT&quot;&gt;&lt;FONT FACE=&quot;Arial&quot; STYLE=&quot;font-size:12px&quot; COLOR=&quot;#000000&quot; LETTERSPACING=&quot;0&quot; KERNING=&quot;0&quot;&gt;{!CompetitorAccountSorted} Products&lt;/FONT&gt;&lt;/DIV&gt;</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>123</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>NarrowAccountsTextbox</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>AccountNameforProduct</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Active</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>AssetstoCreate</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CompAccID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CompAccountIDforLookup</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CompContractID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CompetName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CompProductsList</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Competitor_Product__c</objectType>
    </variables>
    <variables>
        <name>ContractActive</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ContractInactive</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Current</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>CurrentCompProducts</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Competitor_Product__c</objectType>
    </variables>
    <variables>
        <name>ID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>InputAccID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ListofProductsSobj</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Competitor_Product__c</objectType>
    </variables>
    <variables>
        <name>OutboundActive</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
