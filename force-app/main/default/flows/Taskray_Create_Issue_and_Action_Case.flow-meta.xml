<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>49.0</apiVersion>
    <description>Creates an Issue and Action case when a POAP Taskray project has been raised additional fields added 22.04.20</description>
    <interviewLabel>Taskray - Create Issue and Action Case {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Taskray - Create Issue and Action Case</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <description>Create the Issues and Actions case for POAP</description>
        <name>Create_I_A_Case</name>
        <label>Create I &amp; A Case</label>
        <locationX>201</locationX>
        <locationY>52</locationY>
        <assignRecordIdToReference>CaseID</assignRecordIdToReference>
        <connector>
            <targetReference>Update_Taskray_Project_Record</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>TaskrayProject.TASKRAY__trAccount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Account__c</field>
            <value>
                <elementReference>TaskrayProject.TASKRAY__trAccount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>BusinessHoursId</field>
            <value>
                <stringValue>01m58000000IgrK</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Client_Sponsor__c</field>
            <value>
                <elementReference>TaskrayProject.Client_Sponsor__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>TaskrayProject.Client_PM__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description</field>
            <value>
                <elementReference>TaskrayProject.Objectives__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description_Trimmed__c</field>
            <value>
                <elementReference>TaskrayProject.Brief_Description__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Go_Live_Date__c</field>
            <value>
                <elementReference>TaskrayProject.TASKRAY__Project_End__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>TaskrayProject.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Owner_Manager__c</field>
            <value>
                <elementReference>TaskrayProject.Owner_Manager__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Percent_Complete__c</field>
            <value>
                <elementReference>TaskrayProject.TASKRAY__trCompletionPercentage__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Project_Code__c</field>
            <value>
                <elementReference>TaskrayProject.Project_Code__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RAG__c</field>
            <value>
                <elementReference>TaskrayProject.RAG_Status__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <stringValue>01258000000Vb45AAC</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>TaskrayProject.Name</elementReference>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordCreates>
    <recordUpdates>
        <description>Sets case ID on linked taskray project record</description>
        <name>Update_Taskray_Project_Record</name>
        <label>Update Taskray Project Record</label>
        <locationX>390</locationX>
        <locationY>49</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TaskrayProject.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Project_Case__c</field>
            <value>
                <elementReference>CaseID</elementReference>
            </value>
        </inputAssignments>
        <object>TASKRAY__Project__c</object>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Create_I_A_Case</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <variables>
        <description>Case ID from create POAP Case</description>
        <name>CaseID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>TaskrayProject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
</Flow>
