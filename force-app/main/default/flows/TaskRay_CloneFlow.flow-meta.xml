<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Bulk_Add_Projects</name>
        <label>Bulk Add Projects</label>
        <locationX>1542</locationX>
        <locationY>242</locationY>
        <actionName>TASKRAY__trInvocableProjectsClone</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Created_Taskray_Projects</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>sourceFieldList</name>
            <value>
                <elementReference>OriginalObjectMapCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>newProjectNames</name>
            <value>
                <elementReference>ProjectNames</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectScheduleModes</name>
            <value>
                <elementReference>StartCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectTargetDates</name>
            <value>
                <elementReference>Startdates</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sourceRecordIds</name>
            <value>
                <elementReference>SourceIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>templateProjectIds</name>
            <value>
                <elementReference>TemplateProjectIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectFieldList</name>
            <value>
                <elementReference>MapToObjectCollection</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OutputProjectIDs</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Bulk_Add_Projects_0</name>
        <label>Bulk Add Projects</label>
        <locationX>689</locationX>
        <locationY>955</locationY>
        <actionName>TASKRAY__trInvocableProjectsClone</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>sourceFieldList</name>
            <value>
                <elementReference>OriginalObjectMapCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>newProjectNames</name>
            <value>
                <elementReference>ProjectNames</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectScheduleModes</name>
            <value>
                <elementReference>StartCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectTargetDates</name>
            <value>
                <elementReference>Startdates</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sourceRecordIds</name>
            <value>
                <elementReference>SourceIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>templateProjectIds</name>
            <value>
                <elementReference>TemplateProjectIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectFieldList</name>
            <value>
                <elementReference>MapToObjectCollection</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OutputProjectIDs</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <actionCalls>
        <name>Bulk_Add_Projects_0_0</name>
        <label>Bulk Add Projects</label>
        <locationX>1184</locationX>
        <locationY>919</locationY>
        <actionName>TASKRAY__trInvocableProjectsClone</actionName>
        <actionType>apex</actionType>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>sourceFieldList</name>
            <value>
                <elementReference>OriginalObjectMapCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>newProjectNames</name>
            <value>
                <elementReference>ProjectNames</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectScheduleModes</name>
            <value>
                <elementReference>StartCollection</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectTargetDates</name>
            <value>
                <elementReference>Startdates</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sourceRecordIds</name>
            <value>
                <elementReference>SourceIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>templateProjectIds</name>
            <value>
                <elementReference>TemplateProjectIDs</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>projectFieldList</name>
            <value>
                <elementReference>MapToObjectCollection</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OutputProjectIDs</assignToReference>
            <name>output</name>
        </outputParameters>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <assignments>
        <name>Add_to_task_ray_collection</name>
        <label>Add to task ray collection</label>
        <locationX>1978</locationX>
        <locationY>102</locationY>
        <assignmentItems>
            <assignToReference>Taskrayprojects</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskrayProjectSingle</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>IterateOpportunityProducts</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_task_ray_collection_0</name>
        <label>Add to task ray collection</label>
        <locationX>363</locationX>
        <locationY>958</locationY>
        <assignmentItems>
            <assignToReference>Taskrayprojects</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskrayProjectSingle</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>more_than_1_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_task_ray_collection_0_0</name>
        <label>Add to task ray collection</label>
        <locationX>892</locationX>
        <locationY>918</locationY>
        <assignmentItems>
            <assignToReference>Taskrayprojects</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskrayProjectSingle</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>more_than_1_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Template_Evaluation</name>
        <label>Assign Template Evaluation</label>
        <locationX>260</locationX>
        <locationY>422</locationY>
        <assignmentItems>
            <assignToReference>CurrnetTemplate</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>a0P4I00000XQdFIUA1</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CTS_ProjectName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>(CTS - Questionnaire)</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Stage_created_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Template_type</name>
        <label>Assign Template type</label>
        <locationX>373</locationX>
        <locationY>419</locationY>
        <assignmentItems>
            <assignToReference>CurrnetTemplate</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>a0P4I00000XQb4IUAT</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CTS_ProjectName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>(CTS - Demo Setup)</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Stage_created</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Template_type_0</name>
        <label>Assign Template type</label>
        <locationX>499</locationX>
        <locationY>420</locationY>
        <assignmentItems>
            <assignToReference>CurrnetTemplate</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>a0P4I00000Ng0RuUAJ</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CTS_ProjectName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>(CTS - Live Migration)</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Stage_created_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Template_type_0_0_0</name>
        <label>Assign Template type</label>
        <locationX>891</locationX>
        <locationY>411</locationY>
        <assignmentItems>
            <assignToReference>CurrnetTemplate</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>a0P4I00000XQeF4UAL</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CTS_ProjectName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>(CTS Payroll)</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Stage_created_0_0_0_0_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Taskray_Project_Details</name>
        <label>Taskray Project Details</label>
        <locationX>1979</locationX>
        <locationY>392</locationY>
        <assignmentItems>
            <assignToReference>TemplateProjectIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CurrentProduct.Taskray_Project_Template__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProjectNames</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>ProjectNametrim</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SourceIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>IncommingOppId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>StartCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Start</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Startdates</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>OppCloseDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MapToObjectCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskRayAccountMapToCollection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OriginalObjectMapCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>AccountIdMapping</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProductValue</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CurrentProduct.Cost_Price__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskrayProjectSingle.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ProjectNametrim</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskrayProjectSingle.Flightpath_Value__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CurrentProduct.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_task_ray_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Taskray_Project_Details_0</name>
        <label>Taskray Project Details</label>
        <locationX>363</locationX>
        <locationY>785</locationY>
        <assignmentItems>
            <assignToReference>TemplateProjectIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CurrnetTemplate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProjectNames</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CTSProjectNameFull</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SourceIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>IncommingOppId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>StartCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Start</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Startdates</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MapToObjectCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskRayAccountMapToCollection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OriginalObjectMapCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>AccountIdMapping</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskrayProjectSingle.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CTSProjectNameFull</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_task_ray_collection_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Taskray_Project_Details_0_0</name>
        <label>Taskray Project Details</label>
        <locationX>892</locationX>
        <locationY>743</locationY>
        <assignmentItems>
            <assignToReference>TemplateProjectIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CurrnetTemplate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ProjectNames</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>CTSProjectNameFull</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SourceIDs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>IncommingOppId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>StartCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Start</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Startdates</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>MapToObjectCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>TaskRayAccountMapToCollection</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>OriginalObjectMapCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>AccountIdMapping</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TaskrayProjectSingle.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CTSProjectNameFull</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_task_ray_collection_0_0</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Check current stage and assign correct template</description>
        <name>Current_Stage</name>
        <label>Current Stage</label>
        <locationX>373</locationX>
        <locationY>258</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Evaluate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Evaluate</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Template_Evaluation</targetReference>
            </connector>
            <label>Evaluate</label>
        </rules>
        <rules>
            <name>Assessment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assessment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage2__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Template_type</targetReference>
            </connector>
            <label>Assessment</label>
        </rules>
        <rules>
            <name>Closed_Won</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.Handover_Id__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage3__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Template_type_0</targetReference>
            </connector>
            <label>Closed Won</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check current stage and assign correct template</description>
        <name>Current_Stage_0</name>
        <label>Current Stage</label>
        <locationX>882</locationX>
        <locationY>255</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Evaluate_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Evaluate</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage1__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <label>Evaluate</label>
        </rules>
        <rules>
            <name>Assessment_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assessment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage2__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <label>Assessment</label>
        </rules>
        <rules>
            <name>Closed_Won_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.Handover_Id__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Stage3__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Template_type_0_0_0</targetReference>
            </connector>
            <label>Closed Won</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Template_in_Collection</name>
        <label>Is Template in Collection</label>
        <locationX>2280</locationX>
        <locationY>374</locationY>
        <defaultConnector>
            <targetReference>Taskray_Project_Details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>TemplateDuplicate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TemplateProjectIDs</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>CurrentProduct.Taskray_Project_Template__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IterateOpportunityProducts</targetReference>
            </connector>
            <label>TemplateDuplicate</label>
        </rules>
    </decisions>
    <decisions>
        <name>more_than_1</name>
        <label>more than 1</label>
        <locationX>1753</locationX>
        <locationY>207</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_s_Exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TemplateProjectIDs</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Bulk_Add_Projects</targetReference>
            </connector>
            <label>Id&apos;s Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>more_than_1_0</name>
        <label>more than 1</label>
        <locationX>504</locationX>
        <locationY>960</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_s_Exist_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TemplateProjectIDs</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Bulk_Add_Projects_0</targetReference>
            </connector>
            <label>Id&apos;s Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>more_than_1_0_0</name>
        <label>more than 1</label>
        <locationX>1025</locationX>
        <locationY>921</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Id_s_Exist_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TemplateProjectIDs</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Bulk_Add_Projects_0_0</targetReference>
            </connector>
            <label>Id&apos;s Exist</label>
        </rules>
    </decisions>
    <decisions>
        <name>Name_Match_Yes</name>
        <label>Name Match?</label>
        <locationX>1828</locationX>
        <locationY>599</locationY>
        <defaultConnector>
            <targetReference>Name_Match</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>ProjectCost</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>TaskrayProjectEdit.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>ProjectCost.Name</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Extra_Fields</targetReference>
            </connector>
            <label>Match</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check project Type, standard TR on Closed Won, Or CTS Transformation</description>
        <name>Project_Type</name>
        <label>Project Type</label>
        <locationX>1234</locationX>
        <locationY>53</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Standard</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>TRProjType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Standard</stringValue>
                </rightValue>
            </conditions>
            <label>Standard</label>
        </rules>
        <rules>
            <name>Financials</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Product__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Financials</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Current_Stage</targetReference>
            </connector>
            <label>Financials</label>
        </rules>
        <rules>
            <name>Payroll</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IncommingOpp.CTS_Product__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Payroll</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Current_Stage_0</targetReference>
            </connector>
            <label>Payroll</label>
        </rules>
    </decisions>
    <description>TaskRay Modified V3 - Rebuild Apex Action</description>
    <formulas>
        <name>Closedateform</name>
        <dataType>Date</dataType>
        <expression>{!OppCloseDate} + 1</expression>
    </formulas>
    <formulas>
        <name>CTSProjectNameFull</name>
        <dataType>String</dataType>
        <expression>{!Account.Name} +&apos; &apos; + {!CTS_ProjectName}</expression>
    </formulas>
    <formulas>
        <name>NameFormula</name>
        <dataType>String</dataType>
        <expression>&apos;FlightPath&apos;</expression>
    </formulas>
    <formulas>
        <description>Trimmed project name</description>
        <name>ProjectNametrim</name>
        <dataType>String</dataType>
        <expression>LEFT({!ProjectNameOriginal},80)</expression>
    </formulas>
    <interviewLabel>TaskRay - CloneFlow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>TaskRay - CloneFlow</label>
    <loops>
        <name>Get_Created_Taskray_Projects</name>
        <label>Get Created Taskray Projects</label>
        <locationX>1589</locationX>
        <locationY>469</locationY>
        <assignNextValueToReference>CurrnetTemplate</assignNextValueToReference>
        <collectionReference>OutputProjectIDs</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Get_Taskray_Projects</targetReference>
        </nextValueConnector>
    </loops>
    <loops>
        <name>IterateOpportunityProducts</name>
        <label>IterateOpportunityProducts</label>
        <locationX>2303</locationX>
        <locationY>40</locationY>
        <assignNextValueToReference>CurrentProduct</assignNextValueToReference>
        <collectionReference>OpportunityProducts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_Template_in_Collection</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>more_than_1</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Name_Match</name>
        <label>Name Match</label>
        <locationX>1835</locationX>
        <locationY>355</locationY>
        <assignNextValueToReference>ProjectCost</assignNextValueToReference>
        <collectionReference>Taskrayprojects</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Name_Match_Yes</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Get_Created_Taskray_Projects</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Get_Account_Name</name>
        <label>Get Account Name</label>
        <locationX>1031</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Project_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOppAccountId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>Account</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Taskray_Projects</name>
        <label>Get Taskray Projects</label>
        <locationX>1716</locationX>
        <locationY>337</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Name_Match</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrnetTemplate</elementReference>
            </value>
        </filters>
        <object>TASKRAY__Project__c</object>
        <outputReference>TaskrayProjectEdit</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>GetOpportunityProducts</name>
        <label>GetOpportunityProducts</label>
        <locationX>744</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Account_Name</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Is_Flightpath__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOppId</elementReference>
            </value>
        </filters>
        <filters>
            <field>TaskRayP__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>OpportunityLineItem</object>
        <outputReference>OpportunityProducts</outputReference>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>OpportunityId</queriedFields>
        <queriedFields>OppCloseDate__c</queriedFields>
        <queriedFields>Taskray_Project_Template__c</queriedFields>
        <queriedFields>Product_2_Name__c</queriedFields>
        <queriedFields>Cost_Price__c</queriedFields>
        <queriedFields>UnitPrice</queriedFields>
    </recordLookups>
    <recordUpdates>
        <description>Set Flightpath Value</description>
        <name>Set_Extra_Fields</name>
        <label>Set Extra Fields</label>
        <locationX>1713</locationX>
        <locationY>595</locationY>
        <connector>
            <targetReference>Get_Created_Taskray_Projects</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TaskrayProjectEdit.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Flightpath_Value__c</field>
            <value>
                <elementReference>TaskrayProjectSingle.Flightpath_Value__c</elementReference>
            </value>
        </inputAssignments>
        <object>TASKRAY__Project__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Stage_created</name>
        <label>Set Stage created</label>
        <locationX>372</locationX>
        <locationY>570</locationY>
        <connector>
            <targetReference>Taskray_Project_Details_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOpp.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CTS_Stage2__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Stage_created_0</name>
        <label>Set Stage created</label>
        <locationX>260</locationX>
        <locationY>572</locationY>
        <connector>
            <targetReference>Taskray_Project_Details_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOpp.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CTS_Stage1__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Stage_created_0_0</name>
        <label>Set Stage created</label>
        <locationX>503</locationX>
        <locationY>576</locationY>
        <connector>
            <targetReference>Taskray_Project_Details_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOpp.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CTS_Stage3__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Set_Stage_created_0_0_0_0_0</name>
        <label>Set Stage created</label>
        <locationX>891</locationX>
        <locationY>577</locationY>
        <connector>
            <targetReference>Taskray_Project_Details_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>IncommingOpp.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>CTS_Stage3__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <start>
        <locationX>404</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>GetOpportunityProducts</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>Acccollect</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ACCID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Account</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AccountCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>AccountID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>AccountID2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue>AccountID</stringValue>
        </value>
    </variables>
    <variables>
        <name>AccountIdMapping</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>AccountId</stringValue>
        </value>
    </variables>
    <variables>
        <name>CreatedProjects</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
    <variables>
        <name>CTS_Financials_Assessment</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CTS_Financials_Evaluation</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CTS_ProjectName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CurrentProduct</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>CurrnetTemplate</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>Destination</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>FlightpathProduct</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Product2</objectType>
    </variables>
    <variables>
        <name>IncommingOpp</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <description>Created to pass the values directly from the record rather than waiting for a lookup to occur in the flow.</description>
        <name>IncommingOppAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>IncommingOppCloseDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Created because the other variable was a record instead of a text value.</description>
        <name>IncommingOppId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>MapToObjectCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OppCloseDate</name>
        <dataType>Date</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>OpportunityID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OpportunityProducts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>OpportunityLineItem</objectType>
    </variables>
    <variables>
        <name>OriginalObjectMapCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Output</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>OutputProjectIDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ProductValue</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
    </variables>
    <variables>
        <name>ProjectCost</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
    <variables>
        <name>Projectids</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ProjectName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>ProjectNameOriginal</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>{!Account.Name} ({!CurrentProduct.Product_2_Name__c})</stringValue>
        </value>
    </variables>
    <variables>
        <name>ProjectNames</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>SourceIDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Start</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Start</stringValue>
        </value>
    </variables>
    <variables>
        <name>StartCollection</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Startdates</name>
        <dataType>Date</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>TaskRayAccountMapToCollection</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>TaskRay__trAccount__c</stringValue>
        </value>
    </variables>
    <variables>
        <name>TaskrayProjectEdit</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
    <variables>
        <name>Taskrayprojects</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
    <variables>
        <name>TaskrayProjectSingle</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>TASKRAY__Project__c</objectType>
    </variables>
    <variables>
        <name>TemplateProjectIDs</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>TRProjType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
