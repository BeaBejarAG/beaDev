<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Send email alert &apos;Handover_Notification&apos;</description>
        <name>Handover_Notification</name>
        <label>Handover Notification</label>
        <locationX>644</locationX>
        <locationY>455</locationY>
        <actionName>Opportunity.Handover_Notification</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Change_RT_and_Stage_to_Order_Processing</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>New_FlexPoints_Opportunity_Notification</name>
        <label>New FlexPoints Opportunity Notification</label>
        <locationX>644</locationX>
        <locationY>4055</locationY>
        <actionName>Opportunity.Access_FlexPoints_New_Opportunity_Notification</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>People_HR_Project_Closed_Won_Notification</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Notify_CSL</name>
        <label>Notify CSL</label>
        <locationX>644</locationX>
        <locationY>1247</locationY>
        <actionName>Opportunity.CPQ_Large_Deal_for_Services</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>Opportunity_Account_Manager</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Notify_Sales_Manager_and_CSL</name>
        <label>Notify Sales Manager and CSL</label>
        <locationX>644</locationX>
        <locationY>911</locationY>
        <actionName>Opportunity.CPQ_Large_Deal_for_Software</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>CPQ_Large_Deal_Service_Products_Email_Notification</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>PeopleHR_Project_Notification</name>
        <label>PeopleHR Project Notification</label>
        <locationX>644</locationX>
        <locationY>4391</locationY>
        <actionName>Opportunity.PeopleHR_Project_Notification</actionName>
        <actionType>emailAlert</actionType>
        <connector>
            <targetReference>CPQ_Sales_Handover_Completed</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>SObjectRowId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>Send_Joyful_ZAP_Outbound_Message</name>
        <label>Send Joyful ZAP Outbound Message</label>
        <locationX>644</locationX>
        <locationY>3719</locationY>
        <actionName>Opportunity.Joyful_ZAP_Outbound</actionName>
        <actionType>outboundMessage</actionType>
        <connector>
            <targetReference>New_Opp_with_Campaign_Source_Flexpoints_Campaign</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
    </actionCalls>
    <apiVersion>54.0</apiVersion>
    <assignments>
        <name>Attachment_TotalCount</name>
        <label>Attachment = TotalCount</label>
        <locationX>644</locationX>
        <locationY>5183</locationY>
        <assignmentItems>
            <assignToReference>$Record.Attachments__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CountAttachment.TotalCount</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Record Type = Order Processing
Stage = Order Processing
Stage Start Date = Today</description>
        <name>Change_RT_and_Stage_to_Order_Processing</name>
        <label>Change RT and Stage to &apos;Order Processing&apos;</label>
        <locationX>644</locationX>
        <locationY>575</locationY>
        <assignmentItems>
            <assignToReference>$Record.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Label.Opp_RecordTypeId_OrderProcessing</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.StageName</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Order Processing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Stage_Start_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>CPQ_Large_Deal_Software_Products_Email_Notification</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Account_Manager</name>
        <label>Set Account Manager</label>
        <locationX>512</locationX>
        <locationY>1583</locationY>
        <assignmentItems>
            <assignToReference>$Record.Account_Manager__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Account.Owner.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Profile_at_point_of_creation</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Deal_Type_Compliance</name>
        <label>Set Deal Type = Compliance</label>
        <locationX>952</locationX>
        <locationY>3287</locationY>
        <assignmentItems>
            <assignToReference>$Record.Deal_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Compliance</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Joyful_ZAPIER_Outbound_Message</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Deal_Type_Strategic_and_Strategic_Date_Stamp</name>
        <label>Set Deal Type = Strategic and Strategic Date Stamp</label>
        <locationX>688</locationX>
        <locationY>3287</locationY>
        <assignmentItems>
            <assignToReference>$Record.Deal_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Strategic</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>$Record.Date_Deal_Type_became_Strategic__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Joyful_ZAPIER_Outbound_Message</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Profile_at_point_of_creation</name>
        <label>Set Profile at point of creation</label>
        <locationX>512</locationX>
        <locationY>1703</locationY>
        <assignmentItems>
            <assignToReference>$Record.Profile_at_point_of_creation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Owner_Profile__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_Opportunity_Source</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Source_Acquired</name>
        <label>Source = Acquired</label>
        <locationX>314</locationX>
        <locationY>2159</locationY>
        <assignmentItems>
            <assignToReference>$Record.Opportunity_Source__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Acquired</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Taskray_Close_Won_Project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Source_Marketing_Sourced</name>
        <label>Source = Marketing Sourced</label>
        <locationX>578</locationX>
        <locationY>2159</locationY>
        <assignmentItems>
            <assignToReference>$Record.Opportunity_Source__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Marketing Sourced</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Taskray_Close_Won_Project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Source_Opp_Attributation</name>
        <label>Source = &apos;Opp Attributation&apos;</label>
        <locationX>842</locationX>
        <locationY>2279</locationY>
        <assignmentItems>
            <assignToReference>$Record.Opportunity_Source__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Sales_Marketing_Subflow.Attributation</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Taskray_Close_Won_Project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Source_Renewal</name>
        <label>Source = Renewal</label>
        <locationX>50</locationX>
        <locationY>2159</locationY>
        <assignmentItems>
            <assignToReference>$Record.Opportunity_Source__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Renewal</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Taskray_Close_Won_Project</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>CPQ_Large_Deal_Service_Products_Email_Notification</name>
        <label>CPQ- Large Deal Service Products Email Notification</label>
        <locationX>776</locationX>
        <locationY>1127</locationY>
        <defaultConnector>
            <targetReference>Opportunity_Account_Manager</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Large_Deal_Service_Products</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SBQQ__PrimaryQuote__r.CPQ_Services_Products_SUM__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>25000.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Evaluation</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__PrimaryQuote__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_CSL</targetReference>
            </connector>
            <label>Large Deal Service Products</label>
        </rules>
    </decisions>
    <decisions>
        <name>CPQ_Large_Deal_Software_Products_Email_Notification</name>
        <label>CPQ- Large Deal Software Products Email Notification</label>
        <locationX>776</locationX>
        <locationY>791</locationY>
        <defaultConnector>
            <targetReference>CPQ_Large_Deal_Service_Products_Email_Notification</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Large_Deal_Software_Products</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Total_ABC__c</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>100000.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Evaluation</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SBQQ__PrimaryQuote__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Notify_Sales_Manager_and_CSL</targetReference>
            </connector>
            <label>Large Deal Software Products</label>
        </rules>
    </decisions>
    <decisions>
        <name>CPQ_Sales_Handover_Completed</name>
        <label>CPQ- Sales Handover Completed?</label>
        <locationX>776</locationX>
        <locationY>4607</locationY>
        <defaultConnector>
            <targetReference>Sales_AttachmentCount</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sales_Handover_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CPQ_Sales_Handover_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Activate_Order_and_Create_Contract</targetReference>
            </connector>
            <doesRequireRecordChangedToMeetCriteria>true</doesRequireRecordChangedToMeetCriteria>
            <label>Sales Handover Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Handover_Sync_Error</name>
        <label>Handover Sync Error</label>
        <locationX>776</locationX>
        <locationY>335</locationY>
        <defaultConnector>
            <targetReference>CPQ_Large_Deal_Software_Products_Email_Notification</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Sync_Error</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Handover_Status__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Handover_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sync Error</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Handover_Notification</targetReference>
            </connector>
            <label>Sync Error</label>
        </rules>
    </decisions>
    <decisions>
        <description>Send an outbound message when the opportunity is Closed Won and the Next step contains zap</description>
        <name>Joyful_ZAPIER_Outbound_Message</name>
        <label>Joyful ZAPIER Outbound Message</label>
        <locationX>776</locationX>
        <locationY>3599</locationY>
        <defaultConnector>
            <targetReference>New_Opp_with_Campaign_Source_Flexpoints_Campaign</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closed_Won_and_the_Next_step_contains_zap</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.NextStep</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>zap</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Joyful_ZAP_Outbound_Message</targetReference>
            </connector>
            <label>Closed Won and the Next step contains zap</label>
        </rules>
    </decisions>
    <decisions>
        <name>New_Deal_Type_Strategic_or_Compliance</name>
        <label>New Deal Type Strategic or Compliance</label>
        <locationX>952</locationX>
        <locationY>3167</locationY>
        <defaultConnector>
            <targetReference>Joyful_ZAPIER_Outbound_Message</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Strategic</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>Deal_Type_when_Owner_Changes.OppDealType</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Deal_Type_when_Owner_Changes.OppDealType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Strategic</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Deal_Type_Strategic_and_Strategic_Date_Stamp</targetReference>
            </connector>
            <label>Strategic</label>
        </rules>
        <rules>
            <name>Compliance</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>Deal_Type_when_Owner_Changes.OppDealType</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Deal_Type_when_Owner_Changes.OppDealType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Compliance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Deal_Type_Compliance</targetReference>
            </connector>
            <label>Compliance</label>
        </rules>
    </decisions>
    <decisions>
        <description>Sends an email to the Opp Owner when a new Flexpoints Opp is created from a Case</description>
        <name>New_Opp_with_Campaign_Source_Flexpoints_Campaign</name>
        <label>New Opp with Campaign Source = Flexpoints Campaign</label>
        <locationX>776</locationX>
        <locationY>3935</locationY>
        <defaultConnector>
            <targetReference>People_HR_Project_Closed_Won_Notification</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>New_Flexpoints_Opp</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Campaign.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Flexpoints Campaign</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>New_FlexPoints_Opportunity_Notification</targetReference>
            </connector>
            <label>New Flexpoints Opp</label>
        </rules>
    </decisions>
    <decisions>
        <description>Default Acc Manager on Opportunities with Account Type = Customer</description>
        <name>Opportunity_Account_Manager</name>
        <label>Opportunity Account Manager</label>
        <locationX>776</locationX>
        <locationY>1463</locationY>
        <defaultConnector>
            <targetReference>Set_Opportunity_Source</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Account_Type_Customer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Customer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Account_Manager</targetReference>
            </connector>
            <label>Account Type = Customer</label>
        </rules>
        <rules>
            <name>Account_Type_Not_Customer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>IsNew</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Account_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Customer</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Set_Profile_at_point_of_creation</targetReference>
            </connector>
            <label>Account Type != Customer</label>
        </rules>
    </decisions>
    <decisions>
        <name>People_HR_Project_Closed_Won_Notification</name>
        <label>People HR Project Closed Won Notification</label>
        <locationX>776</locationX>
        <locationY>4271</locationY>
        <defaultConnector>
            <targetReference>CPQ_Sales_Handover_Completed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>People_HR_and_Closed_Won</name>
            <conditionLogic>1 AND 2 AND 3 AND ( 4 OR 5 OR 6)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Handover_Id__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>PEOPLEHR-MIGRATION</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$User.Migrated_Company__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>People HR</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner.UserRole.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>People HR</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SOW_Description__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>FULFILLMENT:</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PeopleHR_Project_Notification</targetReference>
            </connector>
            <label>People HR and Closed Won</label>
        </rules>
    </decisions>
    <decisions>
        <name>Renewal_Renewal_Uplift_Acquired_Marketing_Source_Marketing_Attributation</name>
        <label>Renewal-Renewal Uplift/Acquired/Marketing Source/Marketing Attributation</label>
        <locationX>446</locationX>
        <locationY>2039</locationY>
        <defaultConnector>
            <targetReference>Sales_Marketing_Subflow</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Source Not Set</defaultConnectorLabel>
        <rules>
            <name>RT_Renewal_Renewal_Uplift</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_Renewal</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_RenewalUplift</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Campaign_RecrordID__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>$Label.Opp_CampaignId_Acquired</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Source_Renewal</targetReference>
            </connector>
            <label>RT = Renewal/Renewal Uplift</label>
        </rules>
        <rules>
            <name>Acquired</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CreatedById</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_CRM_Manager_UserId</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedById</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_Integration_User_UserId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Source_Acquired</targetReference>
            </connector>
            <label>Acquired</label>
        </rules>
        <rules>
            <name>Marketing_Sourced</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Business Development</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Marketing Team Member</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Marketing User</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.Profile.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Access Sales/BD Hybrid User</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.UserRole.Name</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>aCloud Inside Sales</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.CreatedBy.UserRole.Name</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>People HR New Business</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_CloudTransformationServices</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Source_Marketing_Sourced</targetReference>
            </connector>
            <label>Marketing Sourced</label>
        </rules>
    </decisions>
    <decisions>
        <name>Sales_AttachmentCount</name>
        <label>Sales - AttachmentCount</label>
        <locationX>776</locationX>
        <locationY>4943</locationY>
        <defaultConnector>
            <targetReference>Update_Opportunity</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Stage_Order_Processing_Closed_Won_Order_Summary</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Order Processing</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Order Summary</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CountAttachment</targetReference>
            </connector>
            <label>Stage = Order Processing || Closed Won || Order Summary</label>
        </rules>
    </decisions>
    <decisions>
        <description>Set Deal Type field depending on the Owner&apos;s Role</description>
        <name>Sales_Deal_Type</name>
        <label>Sales - Deal Type</label>
        <locationX>776</locationX>
        <locationY>2927</locationY>
        <defaultConnector>
            <targetReference>Joyful_ZAPIER_Outbound_Message</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Owner_Role_Strategic_Accounts</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner.UserRole.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_User_Role_Id_Enterprise_Sales_Leader</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Strategic</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Set_Deal_Type_Strategic_and_Strategic_Date_Stamp</targetReference>
            </connector>
            <label>Owner Role = Strategic Accounts</label>
        </rules>
        <rules>
            <name>Owner_Role_Compliance</name>
            <conditionLogic>1 AND (2 OR 3) AND 4</conditionLogic>
            <conditions>
                <leftValueReference>$Record.IsClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner.UserRole.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_User_Role_Id_Compliance_Team_Member</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Owner.UserRole.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_User_Role_Id_Head_of_Compliance</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Compliance</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Set_Deal_Type_Compliance</targetReference>
            </connector>
            <label>Owner Role = Compliance</label>
        </rules>
        <rules>
            <name>Owner_s_Role_has_changed</name>
            <conditionLogic>1 AND 2 AND (3 OR 4)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Owner_Role__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.IsClosed</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Compliance</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Deal_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Strategic</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Deal_Type_when_Owner_Changes</targetReference>
            </connector>
            <label>Owner&apos;s Role has changed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Set_Opportunity_Source</name>
        <label>Set Opportunity Source</label>
        <locationX>776</locationX>
        <locationY>1919</locationY>
        <defaultConnector>
            <targetReference>Taskray_Close_Won_Project</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Opportunity_Source_is_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Opportunity_Source__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Renewal_Renewal_Uplift_Acquired_Marketing_Source_Marketing_Attributation</targetReference>
            </connector>
            <label>Opportunity Source is null</label>
        </rules>
    </decisions>
    <decisions>
        <name>Taskray_Close_Won_Project</name>
        <label>Taskray - Close Won Project</label>
        <locationX>776</locationX>
        <locationY>2591</locationY>
        <defaultConnector>
            <targetReference>Sales_Deal_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Closed_Won</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Handover_Id__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue></stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_CloudTransformationServices</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TaskRay_Clone_Flow_Standard</targetReference>
            </connector>
            <label>Closed Won</label>
        </rules>
        <rules>
            <name>CTS_Financials</name>
            <conditionLogic>(1 OR 2) AND (3 OR 4 OR 5)</conditionLogic>
            <conditions>
                <leftValueReference>$Record.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_CloudTransformationServices</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>$Label.Opp_RecordTypeId_CloudTransformationServices</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Evaluate</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Assessment</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TaskRay_Clone_Flow_CTS_Financials</targetReference>
            </connector>
            <label>CTS - Financials</label>
        </rules>
    </decisions>
    <description>Opportunity After Save processes</description>
    <environments>Default</environments>
    <formulas>
        <name>IsNew</name>
        <dataType>Boolean</dataType>
        <expression>ISNEW()</expression>
    </formulas>
    <interviewLabel>Opportunity - AFTER Save {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity - AFTER Save</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordUpdates>
        <name>Activate_Order_and_Create_Contract</name>
        <label>Activate Order and Create Contract</label>
        <locationX>644</locationX>
        <locationY>4727</locationY>
        <connector>
            <targetReference>Sales_AttachmentCount</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SBQQ__Quote__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.SBQQ__PrimaryQuote__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Status</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Draft</stringValue>
            </value>
        </filters>
        <inputAssignments>
            <field>SBQQ__Contracted__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Activated</stringValue>
            </value>
        </inputAssignments>
        <object>Order</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity</name>
        <label>Update Opportunity</label>
        <locationX>776</locationX>
        <locationY>5399</locationY>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>650</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Handover_Sync_Error</targetReference>
        </connector>
        <object>Opportunity</object>
        <recordTriggerType>CreateAndUpdate</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>CountAttachment</name>
        <label>CountAttachment</label>
        <locationX>644</locationX>
        <locationY>5063</locationY>
        <connector>
            <targetReference>Attachment_TotalCount</targetReference>
        </connector>
        <flowName>TestCountAttachments</flowName>
        <inputAssignments>
            <name>OpportunityID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Deal_Type_when_Owner_Changes</name>
        <label>Deal Type when Owner Changes</label>
        <locationX>952</locationX>
        <locationY>3047</locationY>
        <connector>
            <targetReference>New_Deal_Type_Strategic_or_Compliance</targetReference>
        </connector>
        <flowName>Sales_Autolaunched_Deal_Type_when_Owner_Changes</flowName>
        <inputAssignments>
            <name>OpportunityID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>OwnerID</name>
            <value>
                <elementReference>$Record.Owner.Id</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Sales_Marketing_Subflow</name>
        <label>Sales Marketing Subflow</label>
        <locationX>842</locationX>
        <locationY>2159</locationY>
        <connector>
            <targetReference>Source_Opp_Attributation</targetReference>
        </connector>
        <flowName>Sales_Marketing_Attributation</flowName>
        <inputAssignments>
            <name>IncommingOpp</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>TaskRay_Clone_Flow_CTS_Financials</name>
        <label>TaskRay - Clone Flow - CTS - Financials</label>
        <locationX>776</locationX>
        <locationY>2711</locationY>
        <connector>
            <targetReference>Sales_Deal_Type</targetReference>
        </connector>
        <flowName>TaskRay_CloneFlow</flowName>
        <inputAssignments>
            <name>IncommingOpp</name>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>IncommingOppAccountId</name>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>IncommingOppId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TRProjType</name>
            <value>
                <stringValue>CTS</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>TaskRay_Clone_Flow_Standard</name>
        <label>TaskRay - Clone Flow - Standard</label>
        <locationX>512</locationX>
        <locationY>2711</locationY>
        <connector>
            <targetReference>Sales_Deal_Type</targetReference>
        </connector>
        <flowName>TaskRay_CloneFlow</flowName>
        <inputAssignments>
            <name>IncommingOppAccountId</name>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>IncommingOppId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>OppCloseDate</name>
            <value>
                <elementReference>$Record.CloseDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>ProjectName</name>
            <value>
                <elementReference>$Record.Account.Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>TRProjType</name>
            <value>
                <stringValue>Standard</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
</Flow>
